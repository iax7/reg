%section#people
  %h3 Totales Personas
  .row
    .col-md-5.col-sm-6.col-xs-10
      .table-responsive
        %table.table.table-bordered.table-condensed
          %thead.bg-primary
            %tr
              %th
              %th Total
              %th Restante
          %tbody
            - @people.each do |person|
              %tr
                - is_ca = person.concept == 'N'
                %td= expand_totals_label person.concept
                %td{ class: ( is_ca ? 'text-right text-danger' : 'text-right') }
                  = person.total
                %td.text-right= person.remaining

%section#offerings
  %h3 Ofrendas
  .row
    .col-md-5.col-sm-6.col-xs-10
      .table-responsive
        %table.table.table-bordered.table-condensed
          %thead.bg-primary
            %tr
              %th
              %th Total
          %tbody
            %tr
              %td Ofrendas:
              %td{ class: 'text-right' }
                = number_to_currency @offerings

%section#food
  %h3 Totales Comida
  .table-responsive
    %table.table.table-bordered.table-condensed.table-striped
      %thead
        %tr
          %th{ rowspan: 2 }
          %th{ colspan: 3, class: 'text-center viernes' } Viernes
          %th{ colspan: 3, class: 'text-center sabado' } S치bado
          %th{ colspan: 3, class: 'text-center domingo' } Domingo
          %th{ colspan: 3, class: 'text-center lunes' } Lunes
        %tr
          %th.text-center.viernes Des
          %th.text-center.viernes Com
          %th.text-center.viernes Cen
          %th.text-center.sabado Des
          %th.text-center.sabado Com
          %th.text-center.sabado Cen
          %th.text-center.domingo Des
          %th.text-center.domingo Com
          %th.text-center.domingo Cen
          %th.text-center.lunes Des
          %th.text-center.lunes Com
          %th.text-center.lunes Cen
      %tbody
        - @food.each do |food|
          %tr
            %td
              %strong= expand_totals_label food.concept
            %td.text-right= food.v1
            %td.text-right= food.v2
            %td.text-right= food.v3
            %td.text-right= food.s1
            %td.text-right= food.s2
            %td.text-right= food.s3
            %td.text-right= food.d1
            %td.text-right= food.d2
            %td.text-right= food.d3
            %td.text-right= food.l1
            %td.text-right= food.l2
            %td.text-right= food.l3

%section#allo
  %h3 Totales Hospedaje
  .row
    .col-xs-6
      %h5 Por Sexo
      %table.table.table-condensed.table-bordered
        %thead
          %tr.bg-primary
            %th
            %th Sexo
            %th Cantidad
            %th Restante
        %tbody
          - @allo_sex.each do |c|
            %tr
              %td
                - tip = c['isconfirmed'] == 't' ? 'Confirmados' : 'No Confirmados'
                %span{ data: { toggle: 'tooltip', placement: 'top' },
                      title: "#{tip}" }= c['isconfirmed'] == 't' ? 'C' : 'N'
              %td= c['sex'] == 'male' ? 'Hombre' : 'Mujer'
              %td.text-right= c['count']
              %td.text-right= c['remaining']
    .col-xs-6
      %h5 Por Edad
      %table.table.table-condensed.table-bordered
        %thead
          %tr.bg-primary
            %th
            %th Rango Edad
            %th Cantidad
        %tbody
          - @allo_age.each do |a|
            %tr
              %td
                - tip = a['isconfirmed'] == 't' ? 'Confirmados' : 'Todos'
                %span{ data: { toggle: 'tooltip', placement: 'top' },
                      title: "#{tip}" }= a['isconfirmed'] == 't' ? 'C' : 'T'
              %td= a['age'] == 'a' ? 'Adultos' : 'Ni침os'
              %td.text-right= a['count']
  .row
    .col-md-6
      .table-responsive
        %table.table.table-bordered.table-condensed
          %thead.bg-info
            %tr
              %th
              %th Adultos
              %th Ni침os
              %th Infantes
              %th Recaudado
          %tbody
            - full = Rails.application.config.reg_allocation_full_price
            - half = Rails.application.config.reg_allocation_half_price
            - @allo.each do |a|
              %tr
                %td
                  %strong= expand_totals_label a.concept
                - amount = (a.n1.to_i * full) + (a.n2.to_i * half)
                %td.text-right= a.n1
                %td.text-right= a.n2
                %td.text-right= a.n3
                %td.text-right
                  %strong= number_to_currency amount, precision: 0

%section#trans
  %h3 Totales Transporte
  .table-responsive
    %table.table.table-bordered.table-condensed
      %thead
        %tr
          %th{ rowspan: 2 }
          %th{ colspan: 2, class: 'text-center viernes' } Viernes
          %th{ colspan: 2, class: 'text-center sabado' } S치bado
          %th{ colspan: 2, class: 'text-center domingo' } Domingo
          %th{ colspan: 2, class: 'text-center lunes' } Lunes
          %th{ rowspan: 2, class: 'text-center' } Total
        %tr
          %th.text-center.viernes Sal
          %th.text-center.viernes Reg
          %th.text-center.sabado Sal
          %th.text-center.sabado Reg
          %th.text-center.domingo Sal
          %th.text-center.domingo Reg
          %th.text-center.lunes Sal
          %th.text-center.lunes Reg
      %tbody
        - @trans.each do |t|
          %tr
            %td
              %strong= expand_totals_label t.concept
            %td.text-right= t.v1
            %td.text-right= t.v2
            %td.text-right= t.s1
            %td.text-right= t.s2
            %td.text-right= t.d1
            %td.text-right= t.d2
            %td.text-right= t.l1
            %td.text-right= t.l2
            %td.text-right= number_to_currency t.price

:javascript
  $(function () {
      $('[data-toggle="tooltip"]').tooltip()
  })